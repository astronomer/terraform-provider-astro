---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "astro_cluster Resource - astro"
subcategory: ""
description: |-
  Cluster resource. If creating multiple clusters, add a delay between each cluster creation to avoid cluster creation limiting errors.
---

# astro_cluster (Resource)

Cluster resource. If creating multiple clusters, add a delay between each cluster creation to avoid cluster creation limiting errors.

## Example Usage

```terraform
resource "astro_cluster" "aws_example" {
  type             = "DEDICATED"
  name             = "my first aws cluster"
  region           = "us-east-1"
  cloud_provider   = "AWS"
  vpc_subnet_range = "172.20.0.0/20"
  workspace_ids    = []
  timeouts = {    # Optional timeouts for create, update, and delete
    create = "3h" # Timeout after 3 hours if the cluster is not created
    update = "2h" # Timeout after 2 hours if the cluster is not updated
    delete = "1h" # Timeout after 1 hour if the cluster is not deleted
  }
}

resource "astro_cluster" "azure_example" {
  type             = "DEDICATED"
  name             = "my first azure cluster"
  region           = "westus2"
  cloud_provider   = "AZURE"
  vpc_subnet_range = "172.20.0.0/19"
  workspace_ids    = ["clv4wcf6f003u01m3zp7gsvzg"]
}

resource "astro_cluster" "gcp_example" {
  type                  = "DEDICATED"
  name                  = "my first gcp cluster"
  region                = "us-central1"
  cloud_provider        = "GCP"
  pod_subnet_range      = "172.21.0.0/19"
  service_peering_range = "172.23.0.0/20"
  service_subnet_range  = "172.22.0.0/22"
  vpc_subnet_range      = "172.20.0.0/22"
  workspace_ids         = []
}

// Import an existing cluster
import {
  id = "clozc036j01to01jrlgvuf98d" // ID of the existing cluster
  to = astro_cluster.imported_cluster
}
resource "astro_cluster" "imported_cluster" {
  type                  = "DEDICATED"
  name                  = "an existing cluster to import"
  region                = "us-central1"
  cloud_provider        = "GCP"
  pod_subnet_range      = "172.21.0.0/19"
  service_peering_range = "172.23.0.0/20"
  service_subnet_range  = "172.22.0.0/22"
  vpc_subnet_range      = "172.20.0.0/22"
  workspace_ids         = []
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_provider` (String) Cluster cloud provider - if changed, the cluster will be recreated.
- `name` (String) Cluster name
- `region` (String) Cluster region - if changed, the cluster will be recreated.
- `type` (String) Cluster type
- `vpc_subnet_range` (String) Cluster VPC subnet range. If changed, the cluster will be recreated.
- `workspace_ids` (Set of String) Cluster workspace IDs

### Optional

- `pod_subnet_range` (String) Cluster pod subnet range - required for 'GCP' clusters. If changed, the cluster will be recreated.
- `service_peering_range` (String) Cluster service peering range - required for 'GCP' clusters. If changed, the cluster will be recreated.
- `service_subnet_range` (String) Cluster service subnet range - required for 'GCP' clusters. If changed, the cluster will be recreated.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `created_at` (String) Cluster creation timestamp
- `db_instance_type` (String) Cluster database instance type
- `id` (String) Cluster identifier
- `is_limited` (Boolean) Whether the cluster is limited
- `metadata` (Attributes) Cluster metadata (see [below for nested schema](#nestedatt--metadata))
- `node_pools` (Attributes Set) Cluster node pools (see [below for nested schema](#nestedatt--node_pools))
- `provider_account` (String) Cluster provider account
- `status` (String) Cluster status
- `tenant_id` (String) Cluster tenant ID
- `updated_at` (String) Cluster last updated timestamp

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Read-Only:

- `external_ips` (Set of String) Cluster external IPs
- `oidc_issuer_url` (String) Cluster OIDC issuer URL


<a id="nestedatt--node_pools"></a>
### Nested Schema for `node_pools`

Read-Only:

- `cloud_provider` (String) Node pool cloud provider
- `cluster_id` (String) Node pool cluster identifier
- `created_at` (String) Node pool creation timestamp
- `id` (String) Node pool identifier
- `is_default` (Boolean) Whether the node pool is the default node pool of the cluster
- `max_node_count` (Number) Node pool maximum node count
- `name` (String) Node pool name
- `node_instance_type` (String) Node pool node instance type
- `supported_astro_machines` (Set of String) Node pool supported Astro machines
- `updated_at` (String) Node pool last updated timestamp
